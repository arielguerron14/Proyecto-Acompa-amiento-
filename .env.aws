# ============================================================
# ARCHIVO DE CONFIGURACIÓN PARA DESPLIEGUE EN AWS
# ============================================================
# Instrucciones:
# 1. Reemplaza IP_PRIVADA_EC2_DB con la IP privada real de tu instancia EC2-DB
# 2. Copia este archivo a .env en el servidor EC2 de microservicios
# 3. Los secrets sensibles deben estar en GitHub Secrets
# ============================================================

# ============================================================
# ENTORNO Y VERSIONES
# ============================================================
NODE_ENV=production
SERVICE_VERSION=1.0.0

# ============================================================
# CONECTIVIDAD A BASES DE DATOS (IP PRIVADA EC2-DB)
# ============================================================
# REEMPLAZAR: IP_PRIVADA_EC2_DB con la IP real (ej: 172.31.79.193)
DB_HOST=172.31.67.126

# MongoDB
MONGO_URL=mongodb://172.31.67.126:27017/acompanamiento
MONGO_URI=mongodb://172.31.67.126:27017/estudiantesdb

# PostgreSQL
POSTGRES_HOST=172.31.67.126
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=acompanamiento

# Redis
REDIS_HOST=172.31.67.126
REDIS_PORT=6379
REDIS_URL=redis://172.31.67.126:6379

# ============================================================
# CONFIGURACIÓN DE PUERTOS (SERVICIOS)
# ============================================================
MICRO_AUTH_PORT=5005
MICRO_MAESTROS_PORT=5001
MICRO_ESTUDIANTES_PORT=5002
MICRO_REPORTES_ESTUDIANTES_PORT=5003
MICRO_REPORTES_MAESTROS_PORT=5004
MICRO_NOTIFICACIONES_PORT=5006
MICRO_ANALYTICS_PORT=5007
MICRO_SOAP_BRIDGE_PORT=5008
API_GATEWAY_PORT=8080
FRONTEND_PORT=5500

# ============================================================
# CONFIGURACIÓN DE MESSAGERÍA (Message Brokers)
# ============================================================
# Kafka
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=micro-aws
KAFKA_LOG_LEVEL=2

# RabbitMQ
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_MAX_CONNECTIONS=100
RABBITMQ_HEARTBEAT=60

# MQTT
MQTT_BROKER_URL=mqtt://localhost:1883
MQTT_CLIENT_ID=micro-aws-telemetry
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_RECONNECT_PERIOD=1000
MQTT_CONNECT_TIMEOUT=10000

# ============================================================
# AUTENTICACIÓN Y SEGURIDAD
# ============================================================
JWT_SECRET=REEMPLAZAR_CON_SECRET_FUERTE_EN_PRODUCCION
JWT_EXPIRY=24h
REFRESH_SECRET=REEMPLAZAR_CON_REFRESH_SECRET_FUERTE_EN_PRODUCCION
ACCESS_TOKEN_EXPIRES_IN=900
REFRESH_TOKEN_EXPIRES_IN=604800

# ============================================================
# LOGGING Y DEBUGGING
# ============================================================
LOG_LEVEL=info
DEBUG=false

# ============================================================
# CARACTERÍSTICAS
# ============================================================
EVENTBUS_ENABLED=true
MESSAGEQUEUE_ENABLED=true
TELEMETRY_ENABLED=true

# ============================================================
# DOCKER HUB (para pulls de imágenes)
# ============================================================
DOCKERHUB_ACCOUNT=your-dockerhub-username
REPO_PREFIX=acompanamiento
TAG=latest

# ============================================================
# NOTAS IMPORTANTES PARA AWS
# ============================================================
# 1. EC2-DB debe permitir tráfico entrante en:
#    - Puerto 5432 (PostgreSQL)
#    - Puerto 27017 (MongoDB)
#    - Puerto 6379 (Redis)
#    Desde el Security Group de EC2-Microservicios
#
# 2. EC2-Microservicios debe permitir tráfico entrante en:
#    - Puerto 8080 (API Gateway)
#    - Puerto 5500 (Frontend)
#    Desde Internet (0.0.0.0/0) o desde tu IP
#
# 3. Los contenedores de bases de datos en EC2-DB usan volúmenes:
#    - /data/postgres -> datos PostgreSQL
#    - /data/mongo -> datos MongoDB
#    - /data/redis -> datos Redis
#
# 4. Secrets sensibles deben estar en GitHub Secrets:
#    - AWS_EC2_DB_PRIVATE_IP
#    - AWS_EC2_DB_SSH_PRIVATE_KEY
#    - JWT_SECRET_PROD
#    - POSTGRES_PASSWORD_PROD
