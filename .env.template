# ============================================================
# PLANTILLA DE CONFIGURACIÓN - COPIA A .env PARA USAR
# ============================================================
# Este archivo es la fuente única de verdad para variables env
#
# INSTRUCCIONES:
# 1. Para DESARROLLO LOCAL: copia este archivo a .env
# 2. Para DESPLIEGUE EN AWS: usa .env.aws (pre-configurado)
# 3. Variables críticas con secretos: véase .env.aws
#
# NOTA: .env.generated se crea automáticamente desde Terraform
# No edites .env.generated manualmente
# ============================================================

# ============================================================
# AMBIENTE Y VERSIÓN
# ============================================================
NODE_ENV=development
SERVICE_VERSION=1.0.0

# ============================================================
# DOCKER HUB / CI
# ============================================================
# Para usar en GitHub Actions
DOCKERHUB_ACCOUNT=your-dockerhub-username
REPO_PREFIX=acompanamiento
TAG=latest

# ============================================================
# BASES DE DATOS (DESARROLLO LOCAL)
# ============================================================
# Para desarrollo local, estos servicios corren en Docker
# Para AWS, edita .env.aws con IPs privadas de EC2

# MongoDB
MONGO_URL=mongodb://mongo:27017/acompanamiento
MONGO_URI=mongodb://mongo:27017/estudiantesdb

# PostgreSQL
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=acompanamiento

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379

# ============================================================
# MESSAGE BROKERS (DESARROLLO LOCAL)
# ============================================================

# Kafka (Event Bus)
KAFKA_BROKERS=kafka:9092
KAFKA_CLIENT_ID=micro-estudiantes
KAFKA_LOG_LEVEL=2

# RabbitMQ (Message Queue)
RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672
RABBITMQ_MAX_CONNECTIONS=100
RABBITMQ_HEARTBEAT=60

# MQTT (Telemetría)
MQTT_BROKER_URL=mqtt://mosquitto:1883

# ============================================================
# PUERTOS DE MICROSERVICIOS
# ============================================================
MICRO_AUTH_PORT=5005
MICRO_MAESTROS_PORT=5001
MICRO_ESTUDIANTES_PORT=5002
MICRO_REPORTES_ESTUDIANTES_PORT=5003
MICRO_REPORTES_MAESTROS_PORT=5004
MICRO_NOTIFICACIONES_PORT=5006
MICRO_ANALYTICS_PORT=5007
MICRO_SOAP_BRIDGE_PORT=5008
API_GATEWAY_PORT=8080
FRONTEND_PORT=5500

# ============================================================
# JWT / SEGURIDAD
# ============================================================
JWT_SECRET=replace_this_with_a_strong_secret_in_production
ACCESS_TOKEN_EXPIRES_IN=900
REFRESH_TOKEN_EXPIRES_IN=604800

# ============================================================
# OBSERVABILIDAD
# ============================================================
# Prometheus targets (para scraping de métricas)
PROMETHEUS_SCRAPE_TARGETS=localhost:8080,localhost:5005,localhost:5001,localhost:5002

# ============================================================
# AWS (para despliegue en producción)
# ============================================================
# ⚠️ NO edites aquí. Usa .env.aws en su lugar
# Este archivo se genera automáticamente desde Terraform
# .env.generated debe estar en .gitignore

# API_GATEWAY_IP=<AUTO-GENERADO>
# FRONTEND_IP=<AUTO-GENERADO>
# CORE_IP=<AUTO-GENERADO>
# DB_IP=<AUTO-GENERADO>
# BASTION_IP=<AUTO-GENERADO>

# ============================================================
# INSTRUCCIONES DE USO
# ============================================================
#
# CASO 1: DESARROLLO LOCAL CON DOCKER-COMPOSE
#   → Usa este .env.template sin cambios
#   → Los servicios están en red local "proyecto-network"
#
# CASO 2: DESPLIEGUE EN AWS EC2
#   → Copia .env.aws a .env en el servidor
#   → Actualiza IPs privadas de EC2-DB
#   → Añade secretos en .env.aws (JWT_SECRET, credenciales, etc.)
#
# CASO 3: CI/GITHUB ACTIONS
#   → Usa secretos en GitHub: Settings → Secrets and variables
#   → No necesita .env file durante CI
#
# ============================================================
