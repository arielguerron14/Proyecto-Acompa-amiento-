WORKFLOWS DE DESPLIEGUE DOCKER - ÃNDICE COMPLETO
================================================================================

ARCHIVOS CREADOS: 43 archivos totales

ğŸ“‚ ESTRUCTURA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

.github/workflows/                          (10 WORKFLOWS GITHUB ACTIONS)
  deploy-bastion.yml
  deploy-api-gateway.yml
  deploy-core.yml
  deploy-reportes.yml
  deploy-notificaciones.yml
  deploy-messaging.yml
  deploy-database.yml
  deploy-analytics.yml
  deploy-monitoring.yml
  deploy-frontend.yml

deployment/                                 (DOCUMENTACIÃ“N + SCRIPTS + CÃ“DIGO)
  
  DOCUMENTACIÃ“N (6 archivos)
  â”œâ”€ README.md                  DocumentaciÃ³n principal detallada
  â”œâ”€ QUICK_START.md             GuÃ­a rÃ¡pida (3 opciones de uso)
  â”œâ”€ DEPLOYMENT_MAP.md          Mapa completo de workflows
  â”œâ”€ EXAMPLES.md                10+ casos de uso prÃ¡cticos
  â”œâ”€ SETUP.md                   ConfiguraciÃ³n inicial requerida
  â””â”€ INDEX.sh                   Ãndice visual (ejecutable)
  
  CONFIGURACIÃ“N
  â”œâ”€ config.env                 ParÃ¡metros centralizados
  â””â”€ orchestrator.py            Orquestador Python (boto3)
  
  scripts/                        (13 SCRIPTS BASH)
    â”œâ”€ deploy-all-instances.sh   Orquestador de todas las instancias
    â”œâ”€ deploy-bastion.sh         Deploy EC2-Bastion
    â”œâ”€ deploy-api-gateway.sh     Deploy EC2-API-Gateway
    â”œâ”€ deploy-core.sh            Deploy EC2-CORE (4 microservicios)
    â”œâ”€ deploy-reportes.sh        Deploy EC2-Reportes
    â”œâ”€ deploy-notificaciones.sh  Deploy EC2-Notificaciones
    â”œâ”€ deploy-messaging.sh       Deploy EC2-Messaging
    â”œâ”€ deploy-database.sh        Deploy EC2-DB
    â”œâ”€ deploy-analytics.sh       Deploy EC2-Analytics
    â”œâ”€ deploy-monitoring.sh      Deploy EC2-Monitoring
    â”œâ”€ deploy-frontend.sh        Deploy EC2-Frontend
    â”œâ”€ health-check.sh           Verifica estado de servicios
    â””â”€ rollback.sh               Revierte a versiÃ³n anterior


ğŸš€ INICIO RÃPIDO (ELEGIR UNA OPCIÃ“N)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPCIÃ“N 1: GitHub Actions (Recomendado - Sin CLI)
  1. GitHub â†’ Actions
  2. Selecciona workflow (ej: deploy-core.yml)
  3. Click "Run workflow"
  4. Selecciona environment: dev/staging/prod
  5. Monitorea en vivo

OPCIÃ“N 2: Scripts Bash (Requiere AWS CLI)
  chmod +x deployment/scripts/*.sh
  ./deployment/scripts/deploy-all-instances.sh dev

OPCIÃ“N 3: Python Orchestrator (Requiere boto3)
  pip install boto3
  python3 deployment/orchestrator.py deploy-all --environment dev


ğŸ“‹ INSTANCIAS Y SERVICIOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EC2-Bastion
  Imagen: bastion-host:latest
  Puerto: 22

EC2-API-Gateway
  Imagen: api-gateway:latest
  Puerto: 8080

EC2-CORE
  ImÃ¡genes: micro-auth, micro-estudiantes, micro-maestros, micro-core
  Puertos: 3001, 3002, 3003, 3004

EC2-Reportes
  ImÃ¡genes: micro-reportes-estudiantes, micro-reportes-maestros
  Puertos: 4001, 4002

EC2-Notificaciones
  Imagen: micro-notificaciones:latest
  Puerto: 5000

EC2-Messaging
  ImÃ¡genes: proyecto-zookeeper:1.0, proyecto-kafka:1.0, proyecto-rabbitmq:1.0
  Puertos: 2181, 9092, 5672

EC2-DB
  ImÃ¡genes: mongo:latest, postgres:latest, redis:latest
  Puertos: 27017, 5432, 6379
  VolÃºmenes: mongo_data, postgres_data, redis_data

EC2-Analytics
  Imagen: micro-analytics:latest
  Puerto: 6000

EC2-Monitoring
  ImÃ¡genes: proyecto-prometheus:1.0, proyecto-grafana:1.0
  Puertos: 9090, 3000
  VolÃºmenes: prometheus_data, grafana_data

EC2-Frontend
  Imagen: frontend-web:latest
  Puertos: 80, 443


âš™ï¸  PRE-REQUISITOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GITHUB SECRETS (Settings â†’ Secrets and variables â†’ Actions)
  - AWS_ACCESS_KEY_ID (Requerido)
  - AWS_SECRET_ACCESS_KEY (Requerido)
  - SLACK_WEBHOOK (Opcional)

AWS IAM PERMISOS
  - ec2:DescribeInstances
  - ssm:SendCommand
  - ssm:GetCommandInvocation

INSTANCIAS EC2
  - Systems Manager Agent ejecutÃ¡ndose
  - Rol IAM con permisos SSM
  - Tag Name con valores exactos:
    * EC2-Bastion
    * EC2-API-Gateway
    * EC2-CORE
    * EC2-Reportes
    * EC2-Notificaciones
    * EC2-Messaging
    * EC2-DB
    * EC2-Analytics
    * EC2-Monitoring
    * EC2-Frontend


ğŸ“Š ORDEN RECOMENDADO DE DESPLIEGUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. EC2-DB          (Esperar que termine)
2. EC2-Messaging   (Esperar que termine)
3. EC2-Bastion
4. EC2-CORE
5. EC2-API-Gateway
6. EC2-Reportes
7. EC2-Notificaciones
8. EC2-Analytics
9. EC2-Monitoring  (Esperar que termine)
10. EC2-Frontend


ğŸ“ DOCUMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

README.md (DocumentaciÃ³n Principal)
  - Estructura completa
  - Uso de workflows
  - Uso de scripts
  - Variables de entorno
  - VerificaciÃ³n de despliegue
  - Troubleshooting detallado
  - Mejores prÃ¡cticas

QUICK_START.md (GuÃ­a RÃ¡pida)
  - 3 opciones de inicio
  - Casos de uso comunes
  - Health checks
  - Monitoreo

DEPLOYMENT_MAP.md (Mapa de Workflows)
  - Tabla de instancias
  - CaracterÃ­sticas de cada workflow
  - Secretos requeridos
  - Variables de configuraciÃ³n
  - Flujo de trabajo tÃ­pico

EXAMPLES.md (Casos de Uso PrÃ¡cticos)
  - Desplegar todo en prod
  - Desplegar instancia especÃ­fica
  - Verificar salud de servicios
  - Rollback a versiÃ³n anterior
  - Ver logs
  - Actualizar imagen especÃ­fica
  - Blue-green deployment
  - Canary deployment
  - Despliegue programado

SETUP.md (ConfiguraciÃ³n Inicial)
  - Checklist de configuraciÃ³n
  - Configurar GitHub Secrets
  - Configurar permisos IAM
  - Verificar tags en EC2
  - VerificaciÃ³n inicial
  - Troubleshooting setup


ğŸ› ï¸  HERRAMIENTAS INCLUIDAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

health-check.sh
  - Verifica estado de todas las instancias
  - Comprueba servicios activos
  - Genera resumen visual
  - Uso: ./deployment/scripts/health-check.sh

rollback.sh
  - Revierte a versiÃ³n anterior
  - Soporta cualquier instancia
  - Uso: ./deployment/scripts/rollback.sh EC2-CORE v1.0.0

orchestrator.py
  - Despliegue secuencial inteligente
  - Respeta dependencias
  - Monitoreo en tiempo real
  - Resumen de resultados
  - Uso: python3 deployment/orchestrator.py deploy-all --environment dev


âœ¨ CARACTERÃSTICAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Workflows automÃ¡ticos en GitHub Actions
âœ“ Despliegue secuencial inteligente
âœ“ Health checks integrados
âœ“ Rollback capabilities
âœ“ Notificaciones a Slack (opcional)
âœ“ Manejo completo de errores
âœ“ DocumentaciÃ³n exhaustiva
âœ“ MÃºltiples opciones de uso (GitHub Actions, Bash, Python)
âœ“ Respeta dependencias entre servicios
âœ“ Soporta ambientes (dev, staging, prod)
âœ“ Scripts ejecutables en CI/CD
âœ“ ConfiguraciÃ³n centralizada
âœ“ Monitoreo y dashboards integrados


ğŸ” SEGURIDAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Credenciales en GitHub Secrets (no en cÃ³digo)
âœ“ IAM roles en instancias (no SSH directo)
âœ“ AWS Systems Manager para comunicaciÃ³n segura
âœ“ Permisos mÃ­nimos necesarios
âœ“ ValidaciÃ³n de entrada
âœ“ Manejo de errores y excepciones


ğŸ“ˆ MONITOREO POST-DESPLIEGUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Accesible despuÃ©s de despliegue:
  - Grafana: http://<EC2-Monitoring-IP>:3000
  - Prometheus: http://<EC2-Monitoring-IP>:9090
  - RabbitMQ: http://<EC2-Messaging-IP>:15672

Ver logs de servicios:
  - GitHub Actions Console
  - AWS Systems Manager Console
  - docker logs en instancias

Verificar salud:
  - ./deployment/scripts/health-check.sh
  - aws ec2 describe-instances
  - aws ssm send-command


ğŸ†˜ TROUBLESHOOTING RÃPIDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

"Instancia no encontrada"
  â†’ Verificar tags en EC2 con: aws ec2 describe-instances

"Contenedor no inicia"
  â†’ Ver logs: docker logs <CONTAINER_NAME>

"Permisos insuficientes"
  â†’ Verificar IAM role en instancia
  â†’ Verificar Systems Manager Agent: systemctl status amazon-ssm-agent

"Workflow falla en GitHub"
  â†’ Ver logs en Actions tab
  â†’ Verificar GitHub Secrets configurados
  â†’ Verificar credenciales AWS vÃ¡lidas

"Script falla localmente"
  â†’ aws configure
  â†’ pip install boto3
  â†’ chmod +x scripts/*.sh


âœ… CHECKLIST DE SETUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Antes de desplegar:
  â–¡ Secretos GitHub configurados (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
  â–¡ Instancias EC2 corriendo con tags correctos
  â–¡ Systems Manager Agent ejecutÃ¡ndose en instancias
  â–¡ Roles IAM con permisos SSM
  â–¡ Docker instalado en instancias EC2
  â–¡ ImÃ¡genes Docker disponibles (en registry o local)

DespuÃ©s de desplegar:
  â–¡ Verificar health-check.sh
  â–¡ Acceder a dashboards (Grafana, Prometheus)
  â–¡ Verificar logs en servicios
  â–¡ Validar conectividad entre servicios
  â–¡ Probar endpoints crÃ­ticos


ğŸ“ SOPORTE Y REFERENCIAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DocumentaciÃ³n incluida:
  1. README.md - Inicio (30 min lectura)
  2. QUICK_START.md - RÃ¡pido (5 min)
  3. EXAMPLES.md - Casos especÃ­ficos
  4. SETUP.md - ConfiguraciÃ³n

Referencias externas:
  - GitHub Actions: https://docs.github.com/en/actions
  - AWS Systems Manager: https://docs.aws.amazon.com/systems-manager/
  - Docker: https://docs.docker.com/
  - Terraform: https://www.terraform.io/docs


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESUMEN FINAL

Total de archivos creados: 43
  - 10 workflows GitHub Actions
  - 13 scripts Bash
  - 1 orquestador Python
  - 6 documentos de referencia
  - 1 archivo de configuraciÃ³n

Estado: âœ… COMPLETO Y FUNCIONAL

Listo para comenzar â†’ Ver QUICK_START.md

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ãšltima actualizaciÃ³n: 2026-01-16
VersiÃ³n: 1.0
================================================================================
