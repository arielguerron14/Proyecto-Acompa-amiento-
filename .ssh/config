# SSH Config - Configuración para acceso al Bastion y todas las instancias
# 
# Ubicación: ~/.ssh/config (Linux/Mac) o %USERPROFILE%\.ssh\config (Windows)
# 
# Uso:
#   ssh bastion                    # Conectar al Bastion
#   ssh core                       # Conectar a EC2_CORE a través del Bastion
#   ssh db                         # Conectar a EC2_DB a través del Bastion
#

# ====================================
# BASTION HOST
# ====================================
Host bastion
    HostName 13.217.194.108
    User ec2-user
    IdentityFile ~/.ssh/ssh-key-bastion.pem
    Port 22
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR
    Compression yes

# ====================================
# INSTANCIAS A TRAVÉS DEL BASTION
# ====================================

Host core ec2-core
    HostName 3.234.198.34
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host db ec2-db
    HostName 3.237.32.106
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host frontend ec2-frontend
    HostName 54.85.92.175
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host api-gateway
    HostName 3.214.212.205
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host messaging
    HostName 34.207.206.13
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host monitoring
    HostName 34.203.175.72
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host notificaciones
    HostName 35.175.200.15
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host reportes
    HostName 3.94.74.223
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

# ====================================
# CONFIGURACIÓN GLOBAL
# ====================================
Host *
    # Tiempo de espera antes de considerar la conexión perdida
    ServerAliveInterval 60
    ServerAliveCountMax 3
    
    # Configuración de compresión para conexiones lentas
    Compression no
    
    # Reutilizar conexiones SSH existentes
    ControlMaster auto
    ControlPath ~/.ssh/control-%h-%p-%r
    ControlPersist 600
