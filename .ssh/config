# SSH Config - Configuración para acceso al Bastion y todas las instancias
# 
# Ubicación: ~/.ssh/config (Linux/Mac) o %USERPROFILE%\.ssh\config (Windows)
# 
# Uso:
#   ssh bastion                    # Conectar al Bastion
#   ssh core                       # Conectar a EC2_CORE a través del Bastion
#   ssh db                         # Conectar a EC2_DB a través del Bastion
#

# ====================================
# BASTION HOST
# ====================================
Host bastion
    HostName 1.1.1.1
    User ubuntu
    IdentityFile ~/.ssh/ssh-key-bastion.pem
    Port 22
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR
    Compression yes

# ====================================
# INSTANCIAS A TRAVÉS DEL BASTION
# ====================================

Host core ec2-core
    HostName 2.2.2.2
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host db ec2-db
    HostName 3.3.3.3
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host frontend ec2-frontend
    HostName 4.4.4.4
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host api-gateway
    HostName 5.5.5.5
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host messaging
    HostName 6.6.6.6
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host monitoring
    HostName 7.7.7.7
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host notificaciones
    HostName 8.8.8.8
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host reportes
    HostName 9.9.9.9
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

# ====================================
# CONFIGURACIÓN GLOBAL
# ====================================
Host *
    # Tiempo de espera antes de considerar la conexión perdida
    ServerAliveInterval 60
    ServerAliveCountMax 3
    
    # Configuración de compresión para conexiones lentas
    Compression no
    
    # Reutilizar conexiones SSH existentes
    ControlMaster auto
    ControlPath ~/.ssh/control-%h-%p-%r
    ControlPersist 600
