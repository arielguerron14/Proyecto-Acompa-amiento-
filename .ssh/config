# SSH Config - Configuración para acceso al Bastion y todas las instancias
# 
# Ubicación: ~/.ssh/config (Linux/Mac) o %USERPROFILE%\.ssh\config (Windows)
# 
# Uso:
#   ssh bastion                    # Conectar al Bastion
#   ssh core                       # Conectar a EC2_CORE a través del Bastion
#   ssh db                         # Conectar a EC2_DB a través del Bastion
#

# ====================================
# BASTION HOST
# ====================================
Host bastion
    HostName 34.235.224.202
    User ec2-user
    IdentityFile ~/.ssh/ssh-key-bastion.pem
    Port 22
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR
    Compression yes

# ====================================
# INSTANCIAS A TRAVÉS DEL BASTION
# ====================================

Host core ec2-core
    HostName 18.232.51.134
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host db ec2-db
    HostName 100.28.252.104
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host frontend ec2-frontend
    HostName 44.220.126.89
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host api-gateway
    HostName 52.7.168.4
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host messaging
    HostName 44.192.50.144
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host monitoring
    HostName 98.88.93.98
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host notificaciones
    HostName 3.229.118.110
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host reportes
    HostName 52.200.32.56
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

# ====================================
# CONFIGURACIÓN GLOBAL
# ====================================
Host *
    # Tiempo de espera antes de considerar la conexión perdida
    ServerAliveInterval 60
    ServerAliveCountMax 3
    
    # Configuración de compresión para conexiones lentas
    Compression no
    
    # Reutilizar conexiones SSH existentes
    ControlMaster auto
    ControlPath ~/.ssh/control-%h-%p-%r
    ControlPersist 600
