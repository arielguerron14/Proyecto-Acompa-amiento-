# SSH Config - Configuración para acceso al Bastion y todas las instancias
# 
# Ubicación: ~/.ssh/config (Linux/Mac) o %USERPROFILE%\.ssh\config (Windows)
# 
# Uso:
#   ssh bastion                    # Conectar al Bastion
#   ssh core                       # Conectar a EC2_CORE a través del Bastion
#   ssh db                         # Conectar a EC2_DB a través del Bastion
#

# ====================================
# BASTION HOST
# ====================================
Host bastion
    HostName 54.91.218.98
    User ubuntu
    IdentityFile ~/.ssh/ssh-key-bastion.pem
    Port 22
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR
    Compression yes

# ====================================
# INSTANCIAS A TRAVÉS DEL BASTION
# ====================================

Host core ec2-core
    HostName 3.226.242.64
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host db ec2-db
    HostName 44.201.106.25
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host frontend ec2-frontend
    HostName 3.231.12.130
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host api-gateway
    HostName 35.168.216.132
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host messaging
    HostName 3.235.188.132
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host monitoring
    HostName 100.29.147.5
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host notificaciones
    HostName 98.93.193.88
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

Host reportes
    HostName 44.206.88.188
    User ubuntu
    IdentityFile ~/.ssh/ec2-key.pem
    ProxyJump bastion
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    LogLevel ERROR

# ====================================
# CONFIGURACIÓN GLOBAL
# ====================================
Host *
    # Tiempo de espera antes de considerar la conexión perdida
    ServerAliveInterval 60
    ServerAliveCountMax 3
    
    # Configuración de compresión para conexiones lentas
    Compression no
    
    # Reutilizar conexiones SSH existentes
    ControlMaster auto
    ControlPath ~/.ssh/control-%h-%p-%r
    ControlPersist 600
